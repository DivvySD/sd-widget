(this.webpackJsonpsdwidget=this.webpackJsonpsdwidget||[]).push([[0],{407:function(e,t,n){},409:function(e,t,n){},417:function(e,t){},458:function(e,t){},460:function(e,t){},484:function(e,t){},486:function(e,t){},498:function(e,t){},499:function(e,t){},522:function(e,t){},524:function(e,t){},526:function(e,t){},634:function(e,t){},723:function(e,t){},725:function(e,t){},732:function(e,t){},733:function(e,t){},759:function(e,t){},766:function(e,t){},820:function(e,t){},844:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(377),i=n.n(c),s=(n(407),n(3)),u=n(15),o=n(0),p=n.n(o),l=(n(409),n(2));function d(e){var t=e.token,n=e.value,r=e.changeValue;return Object(l.jsxs)("div",{className:"sd-token-input",children:[Object(l.jsx)("div",{className:"sd-token-input-symbol",children:t?t.symbol:""}),Object(l.jsx)("input",{type:"text",onChange:r,value:n||"",placeholder:"0"})]})}var f=n(876),b=n(383),m=n.n(b),h=n(394),v=n(875),w=Object(h.a)({components:{MuiIconButton:{styleOverrides:{root:{background:"#0C1119",color:"#FFF",border:"2px solid #151D28",boxSizing:"border-box"}}}}});function j(e){var t=e.switchAction;return Object(l.jsx)("div",{className:"sd-widget-swap-tokens-button",children:Object(l.jsx)(v.a,{theme:w,children:Object(l.jsx)(f.a,{onClick:t,children:Object(l.jsx)(m.a,{})})})})}var y=n(866),O=n(874),x=Object(h.a)({components:{MuiButton:{styleOverrides:{root:{background:"#212834",color:"#A7A9AE",borderRadius:10,padding:16,paddingTop:6,paddingBottom:6}}}}});function k(e){var t=e.disconnectWallet,n=e.address;return Object(l.jsx)(v.a,{theme:x,children:Object(l.jsxs)(O.a,{onClick:t,className:"sd-wallet-button",children:[Object(l.jsx)(y.a,{fontSize:"small"}),Object(l.jsx)("div",{style:{marginLeft:5},children:n?"0X..."+n.slice(n.length-5):""})]})})}function g(){return{formatNumberInput:function(e,t,n){var r=0;return e&&e.target&&e.target.value?("."!==(r=e.target.value)&&","!==r&&"0,"!==r||(r="0."),isNaN(r)?"":(r>parseFloat(t)&&(r=t),n&&r>parseFloat(n)&&(r=n),r)):""}}}var T=n(384),N=n.n(T),S=n(395),B=document.getElementById("sd-widget"),M=B.dataset.chain,C=B.dataset.infuraid,I={1:"https://mainnet.infura.io/v3/".concat(C&&"1"===M?C:""),56:"https://bsc-dataseed.binance.org/"},A=n(199);function P(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null),o=Object(u.a)(i,2),l=o[0],d=o[1],f=Object(r.useState)(null),b=Object(u.a)(f,2),m=b[0],h=b[1],v=Object(r.useState)(!1),w=Object(u.a)(v,2),j=(w[0],w[1]),y=Object(r.useState)(null),O=Object(u.a)(y,2),x=O[0],k=O[1],g=Object(r.useState)(null),T=Object(u.a)(g,2),B=(T[0],T[1]);function M(){return(M=Object(s.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:if(!(t=e.sent).providerController.cachedProvider){e.next=8;break}return e.next=6,t.connect();case 6:n=e.sent,C(n);case 8:k(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){M.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){x&&j(!0)}),[x]);var C=function(){var e=Object(s.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.provider=t,n=new A(t),e.next=4,n.eth.getAccounts();case 4:return(r=e.sent)&&r.length&&c(r[0]),L(t),e.t0=parseInt,e.next=10,n.eth.net.getId();case 10:e.t1=e.sent,a=(0,e.t0)(e.t1),d(a),h(t.bridge?"walletconnect":"injected");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(){return(P=Object(s.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(window&&window.provider&&m)){e.next=9;break}if("walletconnect"!==m){e.next=6;break}return B({visible:!0,type:"walletconnect"}),e.abrupt("return",!1);case 6:if("injected"!==m){e.next=9;break}return B({visible:!0,type:"injected"}),e.abrupt("return",!1);case 9:return e.next=11,x.connect();case 11:t=e.sent,C(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("close",(function(){(window.provider||t||l||a)&&(D(),B(null))})),t.on("accountsChanged",function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.provider&&c(t[0]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=Object(s.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.provider&&(n=parseInt(t),d(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=new A(window.provider))&&t.currentProvider&&t.currentProvider.close)){e.next=4;break}return e.next=4,t.currentProvider.close();case 4:return c(null),d(null),h(null),e.next=9,x.clearCachedProvider();case 9:window.provider=null;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=Object(s.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={walletconnect:{bridge:"https://bridge.walletconnect.org",display:{name:"WalletConnect",description:"Scan qrcode with your mobile wallet"},package:S.a,options:{bridge:"https://bridge.walletconnect.org",network:"1"===e?"mainnet":"binance",rpc:{1:I[1],56:I[56]},qrcode:!0}}},r=new N.a({disableInjectedProvider:!1,cacheProvider:!0,providerOptions:n}),t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{disconnectWallet:function(){B(null),D()},getWallet:function(){return a},getProvider:function(){return m},getChain:function(){return l},connectWallet:function(){return P.apply(this,arguments)}}}var L=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],D=[{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getSpotPrice",outputs:[{internalType:"uint256",name:"spotPrice",type:"uint256"}],stateMutability:"view",type:"function"}],E=[{inputs:[{internalType:"uint256",name:"tokenBalanceIn",type:"uint256"},{internalType:"uint256",name:"tokenWeightIn",type:"uint256"},{internalType:"uint256",name:"tokenBalanceOut",type:"uint256"},{internalType:"uint256",name:"tokenWeightOut",type:"uint256"},{internalType:"uint256",name:"tokenAmountOut",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"calcInGivenOut",outputs:[{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"tokenInFee",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenBalanceIn",type:"uint256"},{internalType:"uint256",name:"tokenWeightIn",type:"uint256"},{internalType:"uint256",name:"tokenBalanceOut",type:"uint256"},{internalType:"uint256",name:"tokenWeightOut",type:"uint256"},{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"calcOutGivenIn",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"},{internalType:"uint256",name:"tokenInFee",type:"uint256"}],stateMutability:"pure",type:"function"}],W=[{inputs:[{internalType:"uint256",name:"dot",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],name:"SELL",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"dot",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],name:"BUY",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"payable",type:"function"}],F=[{inputs:[],name:"MAX_BUY_RATIO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_SELL_RATIO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],R=n(71);function _(){var e=function(e){return e?Object(R.b)(e):0},t=function(t){var n=e(t).toString();if(!n.includes("."))return t;var r=n.split(".");return r[0]?r[0]:void 0};return{getZeroes:function(e){for(var t=0,n=0;n<e.length&&"0"===e.toString().charAt(n);n++)t++;return t},removeAllDecimals:t,multiply:function(e,t){return Object(R.b)(e)*Object(R.b)(t)},getNonZeroValueIfValidValue:function(e){return Object(R.b)(e)>Object(R.b)("0.00000001")?e:0},separateThousands:function(e){return Object(R.b)(e,{thousandsSeparator:","})},sliceNumberToDecimals:function(n,r){if(n){var a=e(n);return r&&r>0?Object(R.b)(a,{precision:r,roundingMode:R.a.DOWN}):t(a)}},castNumberToString:e}}var V=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"Main",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],X=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],U=[{inputs:[],name:"RPF",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"Backing",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tx1",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tx2",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],G=n(222),Y=n(199);function Z(){var e=new Y(window.provider?window.provider:""),t=_(),n=function(){var n=Object(s.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,c){var i="token"===r.type?r.address:a.address,u=new e.eth.Contract(D,i),o="token"===r.type?r.address:r.fBase,l="token"===a.type?a.address:a.fBase;u.methods.getSpotPrice(o,l).call().then(function(){var e=Object(s.a)(p.a.mark((function e(c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(c=t.castNumberToString(G(c).div(Math.pow(10,18-parseInt(a.decimals)+parseInt(r.decimals)))),n(c)):n(0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),r=function(){var t=Object(s.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!r){t.next=4;break}return t.abrupt("return",new Promise((function(t,a){n.address?new e.eth.Contract(L,n.address).methods.balanceOf(r).call().then((function(e){if(e){var r=new G(e).div(Math.pow(10,n.decimals)).toString();t(r)}else t(0)})):n.address||e.eth.getBalance(r).then((function(e){if(e){var r=new G(e).div(Math.pow(10,n.decimals)).toString();t(r)}else t(0)}))})));case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a=function(){var t=Object(s.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(p.a.mark((function t(a,c){var i,s,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="token"===n.type?n.address:r.address,s="token"===n.type?n.address:n.fBase,u=new e.eth.Contract(L,i),t.next=5,u.methods.getBalance(s).call().then((function(e){a(e)}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),c=function(){var n=Object(s.a)(p.a.mark((function n(r,c,i){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r&&c&&i)){n.next=2;break}return n.abrupt("return",new Promise(function(){var n=Object(s.a)(p.a.mark((function n(u,o){var l,d,f,b,m,h;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l="token"===r.type?r.address:c.address,d=new e.eth.Contract(E,l),n.next=4,a(r,c);case 4:return f=n.sent,n.next=7,a(c,r);case 7:if(b=n.sent,f&&b){n.next=10;break}return n.abrupt("return",!1);case 10:m=new Y.utils.toBN(25*Math.pow(10,18)),h=t.castNumberToString(t.sliceNumberToDecimals(i,r.decimals)*Math.pow(10,r.decimals)),d.methods.calcOutGivenIn(f,m,b,m,new Y.utils.toBN(h),"0").call().then(function(){var e=Object(s.a)(p.a.mark((function e(n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.decimals?Math.pow(10,c.decimals):1,a=n.tokenAmountOut/r,a=t.castNumberToString(a),u(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),i=function(t){return new Promise(function(){var n=Object(s.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(V,t).methods.symbol().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},u=function(t){return new Promise(function(){var n=Object(s.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(V,t).methods.Main().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},o=function(t){return new Promise(function(){var n=Object(s.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(V,t).methods.decimals().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())};return{getBacking:function(t){return new Promise((function(n,r){new e.eth.Contract(U,t.address).methods.Backing().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?(1e3-parseInt(t))/10:0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getTx1:function(t){return new Promise((function(n,r){new e.eth.Contract(U,t.address).methods.tx1().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?100-parseInt(t):0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getTx2:function(t){return new Promise((function(n,r){new e.eth.Contract(U,t.address).methods.tx2().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?100-parseInt(t):0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getRpf:function(t){return new Promise((function(n,r){new e.eth.Contract(U,t.address).methods.RPF().call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?(1e3-parseInt(t))/10:0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},setAllowance:function(t,n,r,a){return new Promise(function(){var c=Object(s.a)(p.a.mark((function c(i,s){var u,o,l;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:u=new e.eth.Contract(X,t.address),"1000000000000000000000000000000000000000000",o="token"===t.type?t.address:n.address,l={from:r},u.methods.approve(o,new Y.utils.toBN("1000000000000000000000000000000000000000000")).send(l).on("receipt",(function(e){i(!0),a()})).on("error",(function(e,t){i(!1)}));case 5:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}())},getApproval:function(t,n,r){return new Promise(function(){var a=Object(s.a)(p.a.mark((function a(c,i){var u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.address){a.next=3;break}return c(!0),a.abrupt("return",!1);case 3:return u="token"===t.type?t.address:n.address,new e.eth.Contract(X,t.address).methods.allowance(r,u).call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c("0"!==t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.abrupt("return");case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},buy:function(n,r,a,c,i,s,u){return new Promise((function(o,p){if(!n||!r||!a||!c||!i||!s)return o(!1),!1;var l={},d=new e.eth.Contract(W,r.address);l.from=s;var f=G(c).times(1-parseInt(i)/100).times(Math.pow(10,r.decimals)),b=t.removeAllDecimals(t.castNumberToString(f)),m=t.sliceNumberToDecimals(a,n.decimals);m=t.castNumberToString(a*Math.pow(10,n.decimals));var h="";n.address?h=d.methods.BUY("0",s,new Y.utils.toBN(t.removeAllDecimals(m)),new Y.utils.toBN(b)):(l.value=new Y.utils.toBN(t.removeAllDecimals(m)),h=d.methods.BUY("0",s,new Y.utils.toBN(b))),h.send(l).once("transactionHash",(function(){})).once("receipt",(function(e){o(!0),u()})).on("error",(function(e){o(!0)})).then((function(e){}))}))},sell:function(n,r,a,c,i,s,u){return new Promise((function(o,p){if(!n||!r||!a||!c||!i||!s)return o(!1),!1;var l={},d=new e.eth.Contract(W,n.address);l.from=s;var f=G(c).times(1-i/100).times(Math.pow(10,r.decimals)),b=t.removeAllDecimals(t.castNumberToString(f)),m=t.sliceNumberToDecimals(a,n.decimals);m=t.castNumberToString(a*Math.pow(10,n.decimals)),d.methods.SELL("0",s,new Y.utils.toBN(t.removeAllDecimals(m)),new Y.utils.toBN(b)).send(l).once("transactionHash",(function(){})).once("receipt",(function(e){o(!0),u()})).on("error",(function(e){o(!0)})).then((function(e){}))}))},getTokenData:function(e,t){return new Promise(function(){var n=Object(s.a)(p.a.mark((function n(r,a){var c,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=26;break}return c={},s={},n.next=5,i(e);case 5:return c.symbol=n.sent,n.next=8,o(e);case 8:return c.decimals=n.sent,c.type="token",c.address=e,n.next=13,u(e);case 13:return s.fBase=n.sent,n.next=16,i(s.fBase);case 16:return s.fBaseSymbol=n.sent,s.symbol=s.fBaseSymbol.substring(1),n.next=20,o(s.fBase);case 20:s.decimals=n.sent,s.type="base",("BNB"===s.symbol&&"56"===t||"ETH"===s.symbol&&"1"===t)&&(s.address=""),r({1:c,2:s}),n.next=27;break;case 26:r(!1);case 27:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},getEstimateIn:function(n,r,c){return!(c<=0)&&new Promise(function(){var i=Object(s.a)(p.a.mark((function i(u,o){var l,d,f,b,m;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l="token"===n.type?n.address:r.address,d=new e.eth.Contract(E,l),i.next=4,a(n,r);case 4:return f=i.sent,i.next=7,a(r,n);case 7:if(b=i.sent,f&&b){i.next=10;break}return i.abrupt("return",!1);case 10:"25",m=c*Math.pow(10,r.decimals),m=t.castNumberToString(m),m=t.removeAllDecimals(m),d.methods.calcInGivenOut(f,"25",b,"25",new Y.utils.toBN(m),"0").call().then(function(){var e=Object(s.a)(p.a.mark((function e(r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.castNumberToString(r.tokenAmountIn/Math.pow(10,n.decimals)),u(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},getEstimateOut:c,getSpotPrice:n,getBalanceByToken:r,getMaxBuy:function(t,n){return new Promise(function(){var r=Object(s.a)(p.a.mark((function r(c,i){var u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u="token"===t.type?t.address:n.address,new e.eth.Contract(F,u).methods.MAX_BUY_RATIO().call().then(function(){var r=Object(s.a)(p.a.mark((function r(i){var o,l,d,f,b;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=15;break}return o=new G(i).div(Math.pow(10,t.decimals)).toString(),r.next=4,a(t,n);case 4:return l=r.sent,r.next=7,a(n,t);case 7:if(d=r.sent,l&&d){r.next=10;break}return r.abrupt("return",!1);case 10:f=new e.eth.Contract(E,u),b=new Y.utils.toBN(25*Math.pow(10,18)),f.methods.calcOutGivenIn(l,b,d,b,new Y.utils.toBN(i),"0").call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({in:o,out:t.tokenAmountOut/Math.pow(10,n.decimals)*.98});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.next=16;break;case 15:c({in:0,out:0});case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getMaxSell:function(t,n){return new Promise(function(){var r=Object(s.a)(p.a.mark((function r(c,i){var u;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u="token"===t.type?t.address:n.address,new e.eth.Contract(F,u).methods.MAX_SELL_RATIO().call().then(function(){var r=Object(s.a)(p.a.mark((function r(i){var o,l,d,f;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=13;break}return o=G(i).div(Math.pow(10,t.decimals)).toString(),r.next=4,a(t,n);case 4:return l=r.sent,r.next=7,a(n,t);case 7:d=r.sent,f=new Y.utils.toBN(25*Math.pow(10,18)),new e.eth.Contract(E,u).methods.calcOutGivenIn(l,f,d,f,new Y.utils.toBN(i),"0").call().then(function(){var e=Object(s.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({in:o,out:G(t.tokenAmountOut).div(Math.pow(10,n.decimals)).times(.98).toString()});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.next=14;break;case 13:c({in:0,out:0});case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}}}var H=n(868),z=n(869),q=n(870),J=Object(h.a)({components:{MuiIconButton:{styleOverrides:{root:{background:"#0C1119",color:"#87898D"}}}}});function K(e){var t=e.chain,n=e.tokenAddress,r=e.setTradeView,a=e.tradeView,c=function(e){"swap"===e?window.open("https://fegex.com/trade/".concat(t,"/").concat(n),"_blank"):"charts"===e&&window.open("https://charts.fegex.com/charts/".concat(n),"_blank")};return Object(l.jsxs)(v.a,{theme:J,children:[Object(l.jsx)(f.a,{style:{marginRight:12},onClick:function(){return r("trade"===a?"lend":"trade")},children:Object(l.jsx)(H.a,{})}),Object(l.jsx)(f.a,{style:{marginRight:12},onClick:function(){return c("swap")},children:Object(l.jsx)(z.a,{})}),Object(l.jsx)(f.a,{onClick:function(){return c("charts")},children:Object(l.jsx)(q.a,{})})]})}var Q=Object(h.a)({components:{MuiButton:{styleOverrides:{root:{background:"#3C90F8",color:"#151D28",borderRadius:10,padding:16,paddingTop:6,paddingBottom:6}}}}});function $(e){var t=e.disabled,n=e.makeTx,r=e.title,a=e.wallet,c=e.connectWallet;return Object(l.jsxs)(v.a,{theme:Q,children:[a&&Object(l.jsx)(O.a,{fullWidth:!0,onClick:n,children:r}),!a&&Object(l.jsx)(O.a,{disabled:t,fullWidth:!0,onClick:function(){return c()},children:t?r:"Connect Wallet"})]})}var ee=n(871);function te(e){var t=e.spotPrice,n=e.token1,r=e.token2,a=e.showTokenomics,c=_();return Object(l.jsxs)("div",{className:"sd-widget-spot-price wrapper-paddings",onClick:a,children:[Object(l.jsxs)("div",{className:"sd-widget-spot-price-icon",children:[Object(l.jsx)("div",{children:"Spot price"}),Object(l.jsxs)("div",{children:[" ",Object(l.jsx)(ee.a,{style:{fontSize:12}})]})]}),Object(l.jsx)("div",{children:t?function(){if(t){if(parseFloat(t)>1)return c.sliceNumberToDecimals(t,2);var e=t.split("."),n=c.getZeroes(e[1]);return c.sliceNumberToDecimals(t,parseInt(n)+3)}return""}()+(n&&r?" "+r.symbol+" / "+n.symbol:""):""})]})}var ne=n.p+"static/media/sdIcon.7a733daf.svg";function re(){return Object(l.jsx)("div",{className:"sd-widget-footer",children:Object(l.jsx)("div",{children:Object(l.jsx)("img",{style:{height:20},src:ne})})})}var ae=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"lendData",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"extendLoan",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_loansToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amt",type:"uint256"}],name:"Loan",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"amountToRepay",outputs:[{internalType:"uint256",name:"finalamt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"oneTokentoBacking",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"repayLoan",outputs:[],stateMutability:"payable",type:"function"}],ce=n(138),ie=n.n(ce),se=n(222),ue=n(199);function oe(){var e=_(),t=new ue(window.provider?window.provider:""),n=function(){var e=Object(s.a)(p.a.mark((function e(n,r,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(p.a.mark((function e(c,i){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&r&&n&&a){e.next=3;break}return c(!1),e.abrupt("return",!1);case 3:s=n.address,new t.eth.Contract(ae,s).methods.amountToRepay(a).call().then((function(e){var t=se(e).div(Math.pow(10,r.decimals)).toString();c(t)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r=function(){var e=Object(s.a)(p.a.mark((function e(n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(p.a.mark((function e(a,c){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&n&&r){e.next=3;break}return a(!1),e.abrupt("return",!1);case 3:i=n.address,new t.eth.Contract(ae,i).methods.lendData(r).call().then((function(e){a(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var n=Object(s.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=Object(s.a)(p.a.mark((function n(c,i){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.provider&&r&&a){n.next=3;break}return c(!1),n.abrupt("return",!1);case 3:new t.eth.Contract(ae,r.address).methods._loansToken(a).call().then((function(t){c(e.castNumberToString(t/Math.pow(10,r.decimals)))}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),c=function(){var n=Object(s.a)(p.a.mark((function n(r,a,c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=Object(s.a)(p.a.mark((function n(i,s){var u,o,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.provider&&r&&a&&c){n.next=3;break}return i(!1),n.abrupt("return",!1);case 3:u=r.address,o=new t.eth.Contract(ae,u),l=e.castNumberToString(a*Math.pow(10,r.decimals)),l=e.removeAllDecimals(l),o.methods.Loan(l).send({from:c}).once("receipt",(function(e){i(!0)})).on("error",(function(e){i(!1)}));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(p.a.mark((function e(n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(p.a.mark((function e(a,c){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&n&&r){e.next=3;break}return a(!1),e.abrupt("return",!1);case 3:window.provider||a(!1),i=n.address,new t.eth.Contract(ae,i).methods.extendLoan().send({from:r}).on("receipt",(function(e){a(!0)})).on("error",(function(e,t){a(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var r=Object(s.a)(p.a.mark((function r(a,c,i){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=Object(s.a)(p.a.mark((function r(s,u){var o,l,d;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(window.provider&&c&&a&&i){r.next=3;break}return s(!1),r.abrupt("return",!1);case 3:return r.next=6,n(a,c,i);case 6:o=r.sent,l=new t.eth.Contract(ae,a.address),d=new ue.utils.toBN(e.castNumberToString(se(o).times(Math.pow(10,18)))),l.methods.repayLoan().send({from:i,value:d}).on("receipt",(function(e){s(!0)})).on("error",(function(e,t){s(!1)}));case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}();return{getAmountToRepay:n,getLoanDurationFromTimestamp:function(e){var t,n=(t=e)?ie()(1e3*t):ie()(),r=ie.a.utc(),a=ie.a.duration(n.diff(r)),c=Math.floor(a.asDays()),i=c?"".concat(c,"d "):"",s=a.hours(),u="".concat(s,"h "),o=a.minutes(),p="".concat(o,"m "),l=a.seconds(),d="".concat(l,"s");return c>=0&&o>=0&&s>=0&&l>=0?"~"+[i,u,p,d].join(""):"EXPIRED"},getLoanTokens:a,makeLoan:c,extendLoan:i,getUserLoanTimestamp:r,repayLoan:u,getTokenBacking:function(n,r){return new Promise((function(a,c){if(!window.provider||!r||!n)return a(!1),!1;new t.eth.Contract(ae,n.address).methods.oneTokentoBacking().call().then((function(t){a(e.castNumberToString(se(t/Math.pow(10,r.decimals))))}))}))}}}var pe=Object(h.a)({components:{MuiButton:{styleOverrides:{root:{background:"#3C90F8",color:"#151D28",borderRadius:10,padding:16,paddingTop:6,paddingBottom:6}}}}});function le(e){var t=e.makeLoan,n=e.wallet,r=e.connectWallet,a=e.disabled;return Object(l.jsx)("div",{className:"sd-widget-loan-buttons",children:Object(l.jsxs)(v.a,{theme:pe,children:[!n&&Object(l.jsx)(O.a,{fullWidth:!0,onClick:r,children:"Connect Wallet"}),n&&Object(l.jsx)(O.a,{fullWidth:!0,disabled:a,onClick:t,children:"Lend"})]})})}var de=Object(h.a)({components:{MuiButton:{styleOverrides:{root:{background:"#3C90F8",color:"#151D28",borderRadius:10,padding:16,paddingTop:6,paddingBottom:6}}}}});function fe(e){var t=e.repayLoan,n=e.extendLoan;return Object(l.jsxs)("div",{className:"sd-widget-extend-repay-buttons",children:[Object(l.jsx)("div",{children:Object(l.jsx)(v.a,{theme:de,children:Object(l.jsx)(O.a,{fullWidth:!0,onClick:n,children:"EXTEND"})})}),Object(l.jsx)("div",{children:Object(l.jsx)(v.a,{theme:de,children:Object(l.jsx)(O.a,{fullWidth:!0,onClick:t,children:"REPAY"})})})]})}var be=n(222);function me(e){var t=e.tokens,n=e.wallet,a=e.walletController,c=oe(),i=g(),o=Z(),f=_(),b=Object(r.useState)(""),m=Object(u.a)(b,2),h=m[0],v=m[1],w=Object(r.useState)(""),j=Object(u.a)(w,2),y=j[0],O=j[1],x=Object(r.useState)(""),k=Object(u.a)(x,2),T=k[0],N=k[1],S=Object(r.useState)(""),B=Object(u.a)(S,2),M=B[0],C=B[1],I=Object(r.useState)(""),A=Object(u.a)(I,2),P=A[0],L=A[1],D=Object(r.useState)(""),E=Object(u.a)(D,2),W=E[0],F=E[1],R=Object(r.useState)(""),V=Object(u.a)(R,2),X=V[0],U=V[1];Object(r.useEffect)((function(){t&&t[1]&&t[2]&&Y()}),[]),Object(r.useEffect)((function(){h?G():O("")}),[h]);var G=function(){O(f.castNumberToString(be(h).times(X)))},Y=function(){var e=Object(s.a)(p.a.mark((function e(){var r,a,i,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getBalanceByToken(t[1],n);case 2:return r=e.sent,F(r||0),e.next=6,c.getTokenBacking(t[1],t[2]);case 6:return a=e.sent,U(a||""),e.next=10,c.getUserLoanTimestamp(t[1],n);case 10:if(i=e.sent,N(parseInt(i)>0?i:""),!(i>0)){e.next=21;break}return e.next=15,c.getLoanTokens(t[1],n);case 15:return s=e.sent,L(s||""),e.next=19,c.getAmountToRepay(t[1],t[2],n);case 19:u=e.sent,C(u>0?u:"");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.makeLoan(t[1],h,n);case 2:e.sent&&Y();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.extendLoan(t[1],n);case 2:e.sent&&Y();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.repayLoan(t[1],t[2],n);case 2:e.sent&&Y();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"sd-widget-bottom",children:[!T&&Object(l.jsxs)("div",{className:"sd-widget-swap-top",children:[Object(l.jsx)("div",{children:"SmartLend"}),Object(l.jsxs)("div",{children:["Available: ",f.sliceNumberToDecimals(W,4)," ",t&&t[1]?t[1].symbol:""]})]}),T&&Object(l.jsx)("div",{className:"sd-widget-loan-top",children:Object(l.jsxs)("div",{className:"sd-widget-loan-expiration",children:[Object(l.jsx)("div",{children:c.getLoanDurationFromTimestamp(T)}),Object(l.jsx)("div",{className:"sd-widget-loan-expiration-tag",children:"LOAN EXPIRATION"}),Object(l.jsx)("div",{})]})}),!T&&t&&Object(l.jsx)(d,{token:t[1],balance:W,changeValue:function(e){var t=i.formatNumberInput(e,W,W);v(t)},value:h}),!T&&t&&Object(l.jsxs)("div",{className:"sd-widget-lend-backing",children:[Object(l.jsx)("div",{children:"Backing per token"}),Object(l.jsxs)("div",{children:[X&&function(){var e=X.split(".");return f.sliceNumberToDecimals(X,parseInt(f.getZeroes(e[1]))+3)}()," ",t[2].symbol]})]}),T&&Object(l.jsxs)("div",{className:"sd-widget-lend-loan-output",children:[Object(l.jsx)("div",{children:"Loan output"}),Object(l.jsx)("div",{children:y||0})]}),T&&t&&Object(l.jsxs)("div",{className:"sd-widget-loan-details",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:"Repay Amount"}),Object(l.jsxs)("div",{children:[M?function(){var e=f.castNumberToString(M).split(".");return f.sliceNumberToDecimals(M,parseInt(f.getZeroes(e[1]))+3)}():0," ",t[2].symbol.substring(0)]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:"Collateral"}),Object(l.jsxs)("div",{children:[P," ",t[1].symbol]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:"Extension Fee"}),Object(l.jsxs)("div",{children:[P?function(){var e=f.castNumberToString(be(.001*P)).split(".");return f.sliceNumberToDecimals(P,parseInt(f.getZeroes(e[1]))+3)}():0," ",t[1].symbol]})]})]}),!T&&Object(l.jsx)(le,{connectWallet:function(){a.connectWallet()},wallet:n,makeLoan:H,disabled:!h}),T&&Object(l.jsx)(fe,{extendLoan:z,repayLoan:q})]})}function he(e){var t=e.tx1,n=e.backing,r=e.rpf;return Object(l.jsxs)("div",{className:"sd-widget-token-tax wrapper-paddings",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{title:"Asset backing",children:"Backing"}),Object(l.jsxs)("div",{children:[n,"%"]})]}),Object(l.jsxs)("div",{title:"Rising price floor",children:[Object(l.jsx)("div",{children:"RPF"}),Object(l.jsxs)("div",{children:[r,"%"]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{title:"Holder rewards",children:"Reflections"}),Object(l.jsxs)("div",{children:[t,"%"]})]})]})}function ve(e){var t=e.backing,n=e.reflections,r=e.rpf,a=e.hideTokenomics;return Object(l.jsxs)("div",{className:"sd-widget-tokenomics",children:[Object(l.jsx)(he,{backing:t,rpf:r,tx1:n}),Object(l.jsx)(O.a,{onClick:a,children:"Back"})]})}var we=document.getElementById("sd-widget");var je=function(){var e=g(),t=Z(),n=_(),a=we.dataset.token,c=we.dataset.chain,i=we.dataset.slippage,o=P(c),f=Object(r.useState)(!1),b=Object(u.a)(f,2),m=b[0],h=b[1],v=Object(r.useState)("buy"),w=Object(u.a)(v,2),y=w[0],O=w[1],x=Object(r.useState)(null),T=Object(u.a)(x,2),N=T[0],S=T[1],B=Object(r.useState)(null),M=Object(u.a)(B,2),C=M[0],I=M[1],A=Object(r.useState)(null),L=Object(u.a)(A,2),D=L[0],E=L[1],W=Object(r.useState)(""),F=Object(u.a)(W,2),R=F[0],V=F[1],X=Object(r.useState)(""),U=Object(u.a)(X,2),G=U[0],Y=U[1],H=Object(r.useState)(0),z=Object(u.a)(H,2),q=z[0],J=z[1],Q=Object(r.useState)(""),ee=Object(u.a)(Q,2),ne=ee[0],ae=ee[1],ce=Object(r.useState)(""),ie=Object(u.a)(ce,2),se=ie[0],ue=ie[1],oe=Object(r.useState)(!1),pe=Object(u.a)(oe,2),le=pe[0],de=pe[1],fe=Object(r.useState)(""),be=Object(u.a)(fe,2),he=be[0],je=be[1],ye=Object(r.useState)(""),Oe=Object(u.a)(ye,2),xe=Oe[0],ke=Oe[1],ge=Object(r.useState)(""),Te=Object(u.a)(ge,2),Ne=Te[0],Se=Te[1],Be=Object(r.useState)("trade"),Me=Object(u.a)(Be,2),Ce=Me[0],Ie=Me[1],Ae=Object(r.useState)(0),Pe=Object(u.a)(Ae,2),Le=Pe[0],De=Pe[1],Ee=Object(r.useState)(0),We=Object(u.a)(Ee,2),Fe=We[0],Re=We[1],_e=Object(r.useState)(0),Ve=Object(u.a)(_e,2),Xe=Ve[0],Ue=Ve[1],Ge=Object(r.useState)(0),Ye=Object(u.a)(Ge,2),Ze=Ye[0],He=Ye[1];Object(r.useEffect)((function(){if(window.provider){var e=o.getWallet();J(e||null),N||Je()}else J(null)}),[o.getWallet(),window.provider]),Object(r.useEffect)((function(){C&&D&&y&&q&&(console.log(q),ze())}),[C&&D&&y,C&&D&&q]),Object(r.useEffect)((function(){if("input"===Ne){if(R){var e=setTimeout((function(){return Ke()}),500);return function(){return clearTimeout(e)}}Y("")}}),[R]),Object(r.useEffect)((function(){if("output"===Ne){if(G){var e=setTimeout((function(){return Qe()}),500);return function(){return clearTimeout(e)}}V("")}}),[G]),Object(r.useEffect)((function(){m&&ue(i||parseFloat(Xe)+parseFloat(Ze)+parseFloat(Le)+parseFloat(Fe)+2)}),[m]);var ze=function(){var e=Object(s.a)(p.a.mark((function e(){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(et(),tt(),nt(),qe(),m){e.next=21;break}return e.next=7,t.getRpf(N[1]);case 7:return n=e.sent,De(n),e.next=11,t.getTx1(N[1]);case 11:return r=e.sent,Ue(r),e.next=15,t.getTx2(N[1]);case 15:return a=e.sent,He(a),e.next=19,t.getBacking(N[1]);case 19:c=e.sent,Re(c);case 21:h(!0);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getApproval(C,D,q);case 2:n=e.sent,de(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenData(a,c);case 2:(n=e.sent)[1]&&n[2]&&(S(n),E(n[1]),I(n[2]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEstimateOut(C,D,R);case 2:n=e.sent,Y(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEstimateIn(C,D,G);case 2:n=e.sent,V(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){V(""),Y("")},et=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBalanceByToken(C,q);case 2:n=e.sent,ae(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSpotPrice(D,C);case 2:n=e.sent,je(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,"buy"!==y){e.next=7;break}return e.next=4,t.getMaxBuy(C,D);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,t.getMaxSell(C,D);case 9:n=e.sent;case 10:ke(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=Object(s.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le){e.next=6;break}return e.next=3,t.setAllowance(C,D,q,ze);case 3:return n=e.sent,de(n),e.abrupt("return",!1);case 6:if("buy"!==y){e.next=13;break}return e.next=9,t.buy(C,D,R,G,se,q,ze);case 9:e.sent&&$e(),e.next=18;break;case 13:if("sell"!==y){e.next=18;break}return e.next=16,t.sell(C,D,R,G,se,q,ze);case 16:e.sent&&$e();case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"sd-widget-wrapper sd-dark",children:[Object(l.jsxs)("div",{className:"sd-widget-main",children:[Object(l.jsxs)("div",{className:"sd-widget-toolbar",children:[Object(l.jsx)("div",{children:Object(l.jsx)(k,{disconnectWallet:o.disconnectWallet,address:q})}),Object(l.jsx)("div",{children:Object(l.jsx)(K,{tradeView:Ce,setTradeView:Ie,chain:"1"===c?"eth":"56"===c?"bsc":void 0,tokenAddress:a})})]}),"trade"===Ce&&Object(l.jsxs)("div",{className:"sd-widget-bottom",children:[Object(l.jsxs)("div",{className:"sd-widget-swap",children:[Object(l.jsxs)("div",{className:"sd-widget-swap-top wrapper-paddings",children:[Object(l.jsx)("div",{children:"Swap"}),Object(l.jsxs)("div",{children:["Available: ",n.sliceNumberToDecimals(ne,4)," ",C?C.symbol:""]})]}),Object(l.jsxs)("div",{className:"sd-widget-input-group",children:[Object(l.jsx)(d,{token:C,balance:ne,changeValue:function(t){var n=e.formatNumberInput(t,xe.in,ne);Se("input"),V(n)},value:R}),Object(l.jsx)(j,{switchAction:function(){O("buy"===y?"sell":"buy"),I(D),E(C),$e()}}),Object(l.jsx)(d,{token:D,changeValue:function(t){var n=e.formatNumberInput(t,xe.out);Se("output"),Y(n)},value:G})]})]}),Object(l.jsx)(te,{spotPrice:he,token1:C,token2:D,showTokenomics:function(){Ie("tokenomics")}}),Object(l.jsx)($,{makeTx:rt,title:le?"sell"===y?"Sell":"Buy":"Approve",wallet:q,connectWallet:function(){o.connectWallet()}})]}),"lend"===Ce&&Object(l.jsx)(me,{tokens:N,wallet:q,walletController:o}),"tokenomics"===Ce&&Object(l.jsx)(ve,{rpf:Le,reflections:Xe,backing:Fe,hideTokenomics:function(){Ie("trade")}})]}),Object(l.jsx)(re,{})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,877)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(je,{})}),document.getElementById("sd-widget")),ye()}},[[844,1,2]]]);