(this.webpackJsonpsdwidget=this.webpackJsonpsdwidget||[]).push([[0],{423:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},432:function(e,t){},473:function(e,t){},475:function(e,t){},499:function(e,t){},501:function(e,t){},513:function(e,t){},514:function(e,t){},537:function(e,t){},539:function(e,t){},541:function(e,t){},649:function(e,t){},738:function(e,t){},740:function(e,t){},747:function(e,t){},748:function(e,t){},774:function(e,t){},781:function(e,t){},835:function(e,t){},859:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(82),i=n.n(c),s=(n(423),n(3)),o=n(9),u=n(0),l=n.n(u),d=(n(425),n(426),n(2));function p(e){var t=e.amountInValue,n=e.tokenOutAmount,a=e.slippage,c=e.loadingData,i=e.token,s=e.value,o=e.changeValue,u=e.priceImpact,l=Object(r.useRef)();return Object(d.jsxs)("div",{className:"sd-token-input",onClick:function(){l.current.focus()},children:[Object(d.jsx)("div",{className:"sd-token-input-symbol",children:i?i.symbol:""}),Object(d.jsxs)("div",{className:"sd-widget-input-group",children:[Object(d.jsx)("input",{ref:l,type:"text",disabled:c,onChange:o,value:s||"",placeholder:"0"}),t>=0&&Object(d.jsx)("div",{className:"sd-widget-input-info",children:t?"~ $"+parseFloat(t).toFixed(2):"~ $0"}),u>=0&&Object(d.jsx)("div",{className:"sd-widget-input-info",children:u&&n&&a?Object(d.jsxs)("div",{className:"sd-widget-min-amount",children:[Object(d.jsxs)("div",{children:["min.  ",(n*(1-a/100)).toFixed(4)]}),"  ",Object(d.jsxs)("div",{className:"sd-widget-price-impact-value",children:["(-",u,"%)"]})]}):"0%"})]})]})}var f=n(893);function b(e){var t=e.disconnectWallet,n=e.address;return Object(d.jsx)(f.a,{title:n?"Disconnect":"",arrow:!0,children:Object(d.jsxs)("div",{onClick:t,className:"sd-wallet-button ".concat(n?"sd-widget-wallet-connected":""),children:[Object(d.jsx)("div",{className:"sd-widget-wallet-icon",children:Object(d.jsx)("span",{className:"icon-walletdisconnect"})}),Object(d.jsx)("div",{children:n?"0X..."+n.slice(n.length-5):""})]})})}var m=n(897),j=n(392),h=n.n(j),v=n(896),w=n(405);function O(e){var t,n=e.switchTheme,r=e.switchAction,a=e.loadingData;return Object(d.jsx)("div",{className:"sd-widget-swap-tokens-button",children:Object(d.jsx)(v.a,{theme:(t=n,Object(w.a)({components:{MuiIconButton:{styleOverrides:{root:{background:"dark"===t?"#0C1119":"#F2F4F3",color:"dark"===t?"#FFF":"#747675",padding:4,border:"dark"===t?"2px solid #151D28":"2px solid #fff",boxSizing:"border-box","& svg":{fontSize:18}}}}}})),children:Object(d.jsx)(m.a,{onClick:r,disabled:a,children:Object(d.jsx)(h.a,{})})})})}var x=n(135),y=n.n(x),g=n(77);function k(){var e=function(e){return e?Object(g.b)(e):0},t=function(t){var n=e(t).toString();if(!n.includes("."))return t;var r=n.split(".");return r[0]?r[0]:void 0};return{getZeroes:function(e){for(var t=0,n=0;n<e.toString().length&&"0"===e.toString().charAt(n);n++)t++;return t},removeAllDecimals:t,multiply:function(e,t){return Object(g.b)(e)*Object(g.b)(t)},getNonZeroValueIfValidValue:function(e){return Object(g.b)(e)>Object(g.b)("0.00000001")?e:0},separateThousands:function(e){return Object(g.b)(e,{thousandsSeparator:","})},sliceNumberToDecimals:function(n,r){if(n){var a=e(n);return r&&r>0?Object(g.b)(y()(a),{precision:r,roundingMode:g.a.DOWN}):t(a)}},castNumberToString:e}}function T(){var e=k();return{formatNumberInput:function(t,n,r){var a=0;if(!(t&&t.target&&t.target.value))return"";if("."!==(a=t.target.value)&&","!==a&&"0,"!==a||(a="0."),","===a.toString().charAt(a.toString().length-1)&&(a=a.toString().slice(0,-1)+"."),isNaN(a))return!1;var c=a.toString().split(".");if(c[1]&&c[1].length>18)return!1;var i=e.getZeroes(c[0]);return i>1&&(c[0]=c[0].toString().substring(i-1),a=c[0],c[1]&&(a+="."+c[1])),a>parseFloat(n)&&(a=n),r&&a>parseFloat(r)&&(a=r),a=a.replace(/\s+/g,"")}}}var N=n(394),S=n.n(N),I=n(406),C=document.getElementById("sd-widget"),M=C.dataset.chain,B=C.dataset.infuraid,A={1:"https://mainnet.infura.io/v3/".concat(B&&"1"===M?B:""),56:"https://bsc-dataseed.binance.org/"},P=n(204);function L(e){var t=Object(r.useState)(null),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null),u=Object(o.a)(i,2),d=u[0],p=u[1],f=Object(r.useState)(null),b=Object(o.a)(f,2),m=b[0],j=b[1],h=Object(r.useState)(null),v=Object(o.a)(h,2),w=v[0],O=v[1];function x(){return(x=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if(!(t=e.sent).providerController||!t.providerController.cachedProvider){e.next=8;break}return e.next=6,t.connect();case 6:n=e.sent,y(n);case 8:O(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]);var y=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.provider=t,n=new P(t),e.next=4,n.eth.getAccounts();case 4:return(r=e.sent)&&r.length&&c(r[0]),k(t),e.t0=parseInt,e.next=10,n.eth.net.getId();case 10:e.t1=e.sent,a=(0,e.t0)(e.t1),p(a),j(t.bridge?"walletconnect":"injected");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function g(){return(g=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.connect();case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("close",(function(){(window.provider||t||d||a)&&T()})),t.on("accountsChanged",function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.provider&&c(t[0]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.provider&&(n=parseInt(t),p(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=new P(window.provider))&&t.currentProvider&&t.currentProvider.disconnect)){e.next=4;break}return e.next=4,t.currentProvider.disconnect();case 4:return c(null),p(null),j(null),e.next=9,w.clearCachedProvider();case 9:window.provider=null;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var t=Object(s.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={walletconnect:{bridge:"https://bridge.walletconnect.org",display:{name:"WalletConnect",description:"Scan qrcode with your mobile wallet"},package:I.a,options:{bridge:"https://bridge.walletconnect.org",network:"1"===e?"mainnet":"binance",rpc:{1:A[1],56:A[56]},qrcode:!0}}},r=new S.a({disableInjectedProvider:!1,cacheProvider:!0,providerOptions:n}),t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{disconnectWallet:function(){T()},getWallet:function(){return a},getProvider:function(){return m},getChain:function(){return d},connectWallet:function(){return g.apply(this,arguments)}}}var D=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],F=[{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"}],name:"getSpotPrice",outputs:[{internalType:"uint256",name:"spotPrice",type:"uint256"}],stateMutability:"view",type:"function"}],E=[{inputs:[{internalType:"uint256",name:"tokenBalanceIn",type:"uint256"},{internalType:"uint256",name:"tokenWeightIn",type:"uint256"},{internalType:"uint256",name:"tokenBalanceOut",type:"uint256"},{internalType:"uint256",name:"tokenWeightOut",type:"uint256"},{internalType:"uint256",name:"tokenAmountOut",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"calcInGivenOut",outputs:[{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"tokenInFee",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenBalanceIn",type:"uint256"},{internalType:"uint256",name:"tokenWeightIn",type:"uint256"},{internalType:"uint256",name:"tokenBalanceOut",type:"uint256"},{internalType:"uint256",name:"tokenWeightOut",type:"uint256"},{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"calcOutGivenIn",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"},{internalType:"uint256",name:"tokenInFee",type:"uint256"}],stateMutability:"pure",type:"function"}],W=[{inputs:[{internalType:"uint256",name:"dot",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmountIn",type:"uint256"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],name:"SELL",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"dot",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],name:"BUY",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"payable",type:"function"}],R=[{inputs:[],name:"MAX_BUY_RATIO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_SELL_RATIO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],z=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"Main",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],V=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],_=[{inputs:[],name:"RPF",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"Backing",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tx1",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tx2",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],H=n(135),U=n(204);function X(){var e=new U(window.provider?window.provider:""),t=k(),n=function(){var n=Object(s.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,c){var i="token"===r.type?r.address:a.address,o=new e.eth.Contract(F,i),u="token"===r.type?r.address:r.fBase,d="token"===a.type?a.address:a.fBase;o.methods.getSpotPrice(u,d).call().then(function(){var e=Object(s.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(c=t.castNumberToString(H(c).div(Math.pow(10,18-parseInt(a.decimals)+parseInt(r.decimals)))),n(c)):n(0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),r=function(){var t=Object(s.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!r){t.next=4;break}return t.abrupt("return",new Promise((function(t,a){n.address?new e.eth.Contract(D,n.address).methods.balanceOf(r).call().then((function(e){if(e){var r=new H(e).div(Math.pow(10,n.decimals)).toString();t(r)}else t(0)})):n.address||e.eth.getBalance(r).then((function(e){if(e){var r=new H(e).div(Math.pow(10,n.decimals)).toString();t(r)}else t(0)}))})));case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a=function(){var t=Object(s.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(l.a.mark((function t(a,c){var i,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="token"===n.type?n.address:r.address,s="token"===n.type?n.address:n.fBase,o=new e.eth.Contract(D,i),t.next=5,o.methods.getBalance(s).call().then((function(e){a(e)}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),c=function(){var n=Object(s.a)(l.a.mark((function n(r,c,i){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r&&c&&i)){n.next=2;break}return n.abrupt("return",new Promise(function(){var n=Object(s.a)(l.a.mark((function n(o,u){var d,p,f,b,m,j;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d="token"===r.type?r.address:c.address,p=new e.eth.Contract(E,d),n.next=4,a(r,c);case 4:return f=n.sent,n.next=7,a(c,r);case 7:if(b=n.sent,f&&b){n.next=10;break}return n.abrupt("return",!1);case 10:m=new U.utils.toBN(25*Math.pow(10,18)),j=t.castNumberToString(t.sliceNumberToDecimals(i,r.decimals)*Math.pow(10,r.decimals)),j=t.removeAllDecimals(j),p.methods.calcOutGivenIn(f,m,b,m,new U.utils.toBN(j),"0").call().then(function(){var e=Object(s.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.decimals?Math.pow(10,c.decimals):1,a=n.tokenAmountOut/r,a=t.castNumberToString(a),o(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),i=function(t){return new Promise(function(){var n=Object(s.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(z,t).methods.symbol().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},o=function(t){return new Promise(function(){var n=Object(s.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(z,t).methods.Main().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},u=function(t){return new Promise(function(){var n=Object(s.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new e.eth.Contract(z,t).methods.decimals().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())};return{getBacking:function(t){return new Promise((function(n,r){new e.eth.Contract(_,t.address).methods.Backing().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?(1e3-parseInt(t))/10:0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getTx1:function(t){return new Promise((function(n,r){new e.eth.Contract(_,t.address).methods.tx1().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?100-parseInt(t):0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getTx2:function(t){return new Promise((function(n,r){new e.eth.Contract(_,t.address).methods.tx2().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?100-parseInt(t):0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},getRpf:function(t){return new Promise((function(n,r){new e.eth.Contract(_,t.address).methods.RPF().call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t?(1e3-parseInt(t))/10:0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},setAllowance:function(t,n,r,a,c){return new Promise(function(){var i=Object(s.a)(l.a.mark((function i(s,o){var u,d,p;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:u=new e.eth.Contract(V,t.address),"1000000000000000000000000000000000000000000",d="token"===t.type?t.address:n.address,p={from:r},u.methods.approve(d,new U.utils.toBN("1000000000000000000000000000000000000000000")).send(p).on("transactionHash",(function(e){c(!0)})).on("receipt",(function(e){s(!0),a(),c(!1)})).on("error",(function(e,t){s(!1),c(!1)}));case 5:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},getApproval:function(t,n,r){return new Promise(function(){var a=Object(s.a)(l.a.mark((function a(c,i){var o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.address){a.next=3;break}return c(!0),a.abrupt("return",!1);case 3:return o="token"===t.type?t.address:n.address,new e.eth.Contract(V,t.address).methods.allowance(r,o).call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c("0"!==t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.abrupt("return");case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},buy:function(n,r,a,c,i,s,o,u){return new Promise((function(l,d){if(!n||!r||!a||!c||!i||!s)return l(!1),!1;var p={},f=new e.eth.Contract(W,r.address);p.from=s;var b=H(c).times(1-parseInt(i)/100).times(Math.pow(10,r.decimals)),m=t.removeAllDecimals(t.castNumberToString(b)),j=t.sliceNumberToDecimals(a,n.decimals);j=t.castNumberToString(a*Math.pow(10,n.decimals));var h="";n.address?h=f.methods.BUY("0",s,new U.utils.toBN(t.removeAllDecimals(j)),new U.utils.toBN(m)):(p.value=new U.utils.toBN(t.removeAllDecimals(j)),h=f.methods.BUY("0",s,new U.utils.toBN(m))),h.send(p).once("transactionHash",(function(){u(!0)})).once("receipt",(function(e){l(!0),o(),u(!1)})).on("error",(function(e){l(!0),u(!1)})).then((function(e){}))}))},sell:function(n,r,a,c,i,s,o,u){return new Promise((function(l,d){if(!n||!r||!a||!c||!i||!s)return l(!1),!1;var p={},f=new e.eth.Contract(W,n.address);p.from=s;var b=H(c).times(1-i/100).times(Math.pow(10,r.decimals)),m=t.removeAllDecimals(t.castNumberToString(b)),j=t.sliceNumberToDecimals(a,n.decimals);j=t.castNumberToString(a*Math.pow(10,n.decimals)),f.methods.SELL("0",s,new U.utils.toBN(t.removeAllDecimals(j)),new U.utils.toBN(m)).send(p).once("transactionHash",(function(){u(!0)})).once("receipt",(function(e){l(!0),o(),u(!1)})).on("error",(function(e){l(!0),u(!1)})).then((function(e){}))}))},getTokenData:function(e,t){return new Promise(function(){var n=Object(s.a)(l.a.mark((function n(r,a){var c,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=26;break}return c={},s={},n.next=5,i(e);case 5:return c.symbol=n.sent,n.next=8,u(e);case 8:return c.decimals=n.sent,c.type="token",c.address=e,n.next=13,o(e);case 13:return s.fBase=n.sent,n.next=16,i(s.fBase);case 16:return s.fBaseSymbol=n.sent,s.symbol=s.fBaseSymbol.substring(1),n.next=20,u(s.fBase);case 20:s.decimals=n.sent,s.type="base",("BNB"===s.symbol&&"56"===t||"ETH"===s.symbol&&"1"===t)&&(s.address=""),r({1:c,2:s}),n.next=27;break;case 26:r(!1);case 27:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},getEstimateIn:function(n,r,c){return!(c<=0)&&new Promise(function(){var i=Object(s.a)(l.a.mark((function i(o,u){var d,p,f,b,m;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return d="token"===n.type?n.address:r.address,p=new e.eth.Contract(E,d),i.next=4,a(n,r);case 4:return f=i.sent,i.next=7,a(r,n);case 7:if(b=i.sent,f&&b){i.next=10;break}return i.abrupt("return",!1);case 10:"25",m=c*Math.pow(10,r.decimals),m=t.castNumberToString(m),m=t.removeAllDecimals(m),p.methods.calcInGivenOut(f,"25",b,"25",new U.utils.toBN(m),"0").call().then(function(){var e=Object(s.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.castNumberToString(r.tokenAmountIn/Math.pow(10,n.decimals)),o(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},getEstimateOut:c,getSpotPrice:n,getBalanceByToken:r,getMaxBuy:function(t,n){return new Promise(function(){var r=Object(s.a)(l.a.mark((function r(c,i){var o;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o="token"===t.type?t.address:n.address,new e.eth.Contract(R,o).methods.MAX_BUY_RATIO().call().then(function(){var r=Object(s.a)(l.a.mark((function r(i){var u,d,p,f,b;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=15;break}return u=new H(i).div(Math.pow(10,t.decimals)).toString(),r.next=4,a(t,n);case 4:return d=r.sent,r.next=7,a(n,t);case 7:if(p=r.sent,d&&p){r.next=10;break}return r.abrupt("return",!1);case 10:f=new e.eth.Contract(E,o),b=new U.utils.toBN(25*Math.pow(10,18)),f.methods.calcOutGivenIn(d,b,p,b,new U.utils.toBN(i),"0").call().then(function(){var e=Object(s.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({pool1:d/Math.pow(10,t.decimals),pool2:p/Math.pow(10,n.decimals),in:u,out:r.tokenAmountOut/Math.pow(10,n.decimals)*.98});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.next=16;break;case 15:c({in:0,out:0});case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getMaxSell:function(t,n){return new Promise(function(){var r=Object(s.a)(l.a.mark((function r(c,i){var o;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o="token"===t.type?t.address:n.address,new e.eth.Contract(R,o).methods.MAX_SELL_RATIO().call().then(function(){var e=Object(s.a)(l.a.mark((function e(r){var i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return i=H(r).div(Math.pow(10,t.decimals)).toString(),e.next=4,a(t,n);case 4:return s=e.sent,e.next=7,a(n,t);case 7:o=e.sent,c({pool1:o/Math.pow(10,n.decimals),pool2:s/Math.pow(10,t.decimals),in:i,out:H(o).div(2).div(Math.pow(10,n.decimals)).toString()}),e.next=12;break;case 11:c({in:0,out:0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}}}function Z(e){var t=e.loadingData,n=e.tokenAddress,r=e.setTradeView,a=e.tradeView;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f.a,{title:"Trade",arrow:!0,children:Object(d.jsx)("div",{onClick:function(){return r("trade")},className:"trade"===a?"sd-widget-toolbar-nav-active":"",children:Object(d.jsx)("span",{className:"icon-swap"})})}),Object(d.jsx)(f.a,{title:"Lend",arrow:!0,children:Object(d.jsx)("div",{onClick:function(){t||r("lend")},className:"lend"===a?"sd-widget-toolbar-nav-active":"",children:Object(d.jsx)("span",{className:"icon-smarttools sd-nav-larger-button"})})}),Object(d.jsx)(f.a,{title:"FEGcharts",arrow:!0,children:Object(d.jsx)("div",{onClick:function(){"charts"==="charts"&&window.open("https://charts.fegex.com/charts/".concat(n),"_blank")},children:Object(d.jsx)("span",{className:"icon-charts"})})})]})}var G=n(898),Y=n(895);function q(e){return Object(w.a)({components:{MuiButton:{styleOverrides:{root:{background:"#3C90F8",color:"dark"===e?"#151D28":"#fff",borderRadius:16,padding:16,height:45,paddingTop:6,paddingBottom:6,transition:"all 0.2s","&:hover":{background:"#3C90F8",opacity:.5}}}}}})}function J(e){var t=e.theme,n=e.loading,r=e.nativeCurrency,a=e.disabled,c=e.makeTx,i=e.title,s=e.wallet,o=e.connectWallet,u=e.amountIn;return Object(d.jsxs)(v.a,{theme:q(t),children:[s&&Object(d.jsxs)(Y.a,{disabled:i==="Leave enough ".concat(r," for gas")||!u||"Incorrect network"===i||!!n,fullWidth:!0,onClick:c,children:[n?Object(d.jsx)(G.a,{size:18,style:{marginRight:15}}):"",i]}),!s&&Object(d.jsx)(Y.a,{disabled:a,fullWidth:!0,onClick:o,children:a?i:"Connect Wallet"})]})}function K(e){var t=e.spotPrice,n=e.token1,r=e.token2,a=k();return Object(d.jsx)("div",{className:"sd-widget-spot-price wrapper-paddings",children:Object(d.jsx)("div",{children:t?function(){if(t){if(parseFloat(t)>1)return a.sliceNumberToDecimals(t,2);var e=t.split("."),n=a.getZeroes(e[1]);return a.sliceNumberToDecimals(t,parseInt(n)+3)}return""}()+(n&&r?" "+r.symbol+"/"+n.symbol:""):""})})}function $(){return Object(d.jsx)("div",{className:"sd-widget-footer",children:Object(d.jsx)("div",{children:Object(d.jsx)("img",{onClick:function(){window.open("https://smartdefi.com")},src:"https://cdn.jsdelivr.net/gh/sdwidget/sd/media/FEGlogo_widgetIcon.svg"})})})}var Q=n(16),ee=n(236),te=n(403),ne=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"lendData",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"extendLoan",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_loansToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amt",type:"uint256"}],name:"Loan",outputs:[{internalType:"uint256",name:"tokenAmountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"amountToRepay",outputs:[{internalType:"uint256",name:"finalamt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"oneTokentoBacking",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"repayLoan",outputs:[],stateMutability:"payable",type:"function"}],re=n(143),ae=n.n(re),ce=n(135),ie=n(204);function se(){var e=k(),t=new ie(window.provider?window.provider:""),n=function(){var e=Object(s.a)(l.a.mark((function e(n,r,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(l.a.mark((function e(c,i){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&r&&n&&a){e.next=3;break}return c(!1),e.abrupt("return",!1);case 3:s=n.address,new t.eth.Contract(ne,s).methods.amountToRepay(a).call().then((function(e){var t=ce(e).div(Math.pow(10,r.decimals)).toString();c(t)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r=function(){var e=Object(s.a)(l.a.mark((function e(n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(l.a.mark((function e(a,c){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&n&&r){e.next=3;break}return a(!1),e.abrupt("return",!1);case 3:i=n.address,new t.eth.Contract(ne,i).methods.lendData(r).call().then((function(e){a(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var n=Object(s.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=Object(s.a)(l.a.mark((function n(c,i){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.provider&&r&&a){n.next=3;break}return c(!1),n.abrupt("return",!1);case 3:new t.eth.Contract(ne,r.address).methods._loansToken(a).call().then((function(t){c(e.castNumberToString(t/Math.pow(10,r.decimals)))}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),c=function(){var n=Object(s.a)(l.a.mark((function n(r,a,c,i){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=Object(s.a)(l.a.mark((function n(s,o){var u,d,p;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.provider&&r&&a&&c){n.next=3;break}return s(!1),n.abrupt("return",!1);case 3:u=r.address,d=new t.eth.Contract(ne,u),p=e.castNumberToString(a*Math.pow(10,r.decimals)),p=e.removeAllDecimals(p),d.methods.Loan(p).send({from:c}).on("transactionHash",(function(){i(!0)})).once("receipt",(function(e){s(!0),i(!1)})).on("error",(function(e){s(!1),i(!1)}));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(l.a.mark((function e(n,r,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(l.a.mark((function e(c,i){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.provider&&n&&r){e.next=3;break}return c(!1),e.abrupt("return",!1);case 3:window.provider||c(!1),s=n.address,new t.eth.Contract(ne,s).methods.extendLoan().send({from:r}).on("transactionHash",(function(){a(!0)})).on("receipt",(function(e){c(!0),a(!1)})).on("error",(function(e,t){c(!1),a(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),o=function(){var r=Object(s.a)(l.a.mark((function r(a,c,i,o){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=Object(s.a)(l.a.mark((function r(s,u){var d,p,f;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(window.provider&&c&&a&&i){r.next=3;break}return s(!1),r.abrupt("return",!1);case 3:return r.next=6,n(a,c,i);case 6:d=r.sent,p=new t.eth.Contract(ne,a.address),f=new ie.utils.toBN(e.castNumberToString(ce(d).times(Math.pow(10,18)))),p.methods.repayLoan().send({from:i,value:f}).on("transactionHash",(function(){o(!0)})).on("receipt",(function(e){s(!0),o(!1)})).on("error",(function(e,t){s(!1),o(!1)}));case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}}),r)})));return function(e,t,n,a){return r.apply(this,arguments)}}();return{setAllowance:function(e,n,r,a){return new Promise(function(){var c=Object(s.a)(l.a.mark((function c(i,s){var o,u,d;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:o=new t.eth.Contract(V,e.address),"1000000000000000000000000000000000000000000",u=e.address,d={from:n},o.methods.approve(u,new ie.utils.toBN("1000000000000000000000000000000000000000000")).send(d).on("transactionHash",(function(){a(!0)})).on("receipt",(function(e){i(!0),r(),a(!1)})).on("error",(function(e,t){i(!1),a(!1)}));case 5:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}())},getApproval:function(e,n){return new Promise(function(){var r=Object(s.a)(l.a.mark((function r(a,c){var i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.address){r.next=3;break}return a(!0),r.abrupt("return",!1);case 3:return i=e.address,new t.eth.Contract(V,e.address).methods.allowance(n,i).call().then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a("0"!==t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.abrupt("return");case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getAmountToRepay:n,getLoanDurationFromTimestamp:function(e){var t,n=(t=e)?ae()(1e3*t):ae()(),r=ae.a.utc(),a=ae.a.duration(n.diff(r)),c=Math.floor(a.asDays()),i=c?"".concat(c,"d "):"",s=a.hours(),o="".concat(s,"h "),u=a.minutes(),l="".concat(u,"m "),d=a.seconds(),p="".concat(d,"s");return c>=0&&u>=0&&s>=0&&d>=0?"~"+[i,o,l,p].join(""):"EXPIRED"},getLoanTokens:a,makeLoan:c,extendLoan:i,getUserLoanTimestamp:r,repayLoan:o,getTokenBacking:function(n,r){return new Promise((function(a,c){if(!window.provider||!r||!n)return a(!1),!1;new t.eth.Contract(ne,n.address).methods.oneTokentoBacking().call().then((function(t){a(e.castNumberToString(ce(t/Math.pow(10,r.decimals))))}))}))}}}function oe(e){var t=e.theme,n=e.loanLoader,r=e.allowanceLoader,a=e.allowance,c=e.makeLoan,i=e.wallet,s=e.connectWallet,o=e.disabled;return Object(d.jsx)("div",{className:"sd-widget-loan-buttons",children:Object(d.jsxs)(v.a,{theme:q(t),children:[!i&&Object(d.jsx)(Y.a,{fullWidth:!0,onClick:s,children:"Connect Wallet"}),i&&Object(d.jsxs)(Y.a,{fullWidth:!0,disabled:o||n||r,onClick:c,children:[n||r?Object(d.jsx)(G.a,{size:18,style:{marginRight:15}}):"",a?"Lend":"Approve"]})]})})}function ue(e){var t=e.theme,n=e.extendLoader,r=e.repayLoader,a=e.repayLoan,c=e.extendLoan;return Object(d.jsxs)("div",{className:"sd-widget-extend-repay-buttons",children:[Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{theme:q(t),children:Object(d.jsxs)(Y.a,{fullWidth:!0,disabled:n||r,onClick:c,children:[n?Object(d.jsx)(G.a,{size:18,style:{marginRight:15}}):"","EXTEND"]})})}),Object(d.jsx)("div",{children:Object(d.jsx)(v.a,{theme:q(t),children:Object(d.jsxs)(Y.a,{fullWidth:!0,disabled:n||r,onClick:a,children:[r?Object(d.jsx)(G.a,{size:18,style:{marginRight:15}}):"","REPAY"]})})})]})}var le=n(35);function de(){return Object(d.jsx)(le.c,{theme:q,children:Object(d.jsx)(Y.a,{disabled:!0,fullWidth:!0,style:{marginTop:24},children:"Incorrect network"})})}var pe=n(29),fe=n(68),be=n(892),me=["className"],je=n(135),he=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"sd-widget-tooltip-list-heading",children:"SmartLend Info"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"Loan period is 30 days"}),Object(d.jsx)("li",{children:"30 day extension fee costs 0.1% of the collateral amount"}),Object(d.jsx)("li",{children:"Collateral will be burned if the loan is not repayed in due time"})]})]});function ve(e){var t=e.theme,n=e.networkIssue,a=e.tokens,c=e.wallet,i=e.walletController,u=se(),f=T(),b=X(),m=k(),j=Object(r.useState)(""),h=Object(o.a)(j,2),v=h[0],w=h[1],O=Object(r.useState)(""),x=Object(o.a)(O,2),y=x[0],g=x[1],N=Object(r.useState)(""),S=Object(o.a)(N,2),I=S[0],C=S[1],M=Object(r.useState)(""),B=Object(o.a)(M,2),A=B[0],P=B[1],L=Object(r.useState)(""),D=Object(o.a)(L,2),F=D[0],E=D[1],W=Object(r.useState)(""),R=Object(o.a)(W,2),z=R[0],V=R[1],_=Object(r.useState)(""),H=Object(o.a)(_,2),U=H[0],Z=H[1],G=Object(r.useState)(""),Y=Object(o.a)(G,2),q=Y[0],J=Y[1],K=Object(r.useState)(!1),$=Object(o.a)(K,2),Q=$[0],ee=$[1],te=Object(r.useState)(!1),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],ce=Object(r.useState)(!1),ie=Object(o.a)(ce,2),le=ie[0],pe=ie[1],fe=Object(r.useState)(!1),me=Object(o.a)(fe,2),ve=me[0],Oe=me[1];Object(r.useEffect)((function(){!n&&c&&a&&a[1]&&a[2]&&!Q&&xe()}),[n,c,Q]),Object(r.useEffect)((function(){ge();var e=setInterval((function(){I&&ge()}),1e3);return I||clearInterval(e),function(){clearInterval(e)}}),[I]);var xe=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,r,i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getBalanceByToken(a[1],c);case 2:return t=e.sent,Z(t||0),e.next=6,u.getTokenBacking(a[1],a[2]);case 6:return n=e.sent,J(n||""),e.next=10,u.getUserLoanTimestamp(a[1],c);case 10:return r=e.sent,C(parseInt(r)>0?r:""),e.next=14,u.getApproval(a[1],c);case 14:if(i=e.sent,g(i),!(r>0)){e.next=25;break}return e.next=19,u.getLoanTokens(a[1],c);case 19:return s=e.sent,E(s||""),e.next=23,u.getAmountToRepay(a[1],a[2],c);case 23:o=e.sent,P(o>0?o:"");case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=6;break}return e.next=3,u.setAllowance(a[1],c,xe,Oe);case 3:return e.abrupt("return",!1);case 6:if(t="",!(parseFloat(v)>0)){e.next=11;break}return e.next=10,u.makeLoan(a[1],v,c,pe);case 10:t=e.sent;case 11:t&&xe();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){V(u.getLoanDurationFromTimestamp(I))},ke=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.extendLoan(a[1],c,ae);case 2:e.sent&&xe();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.repayLoan(a[1],a[2],c,ee);case 2:e.sent&&xe();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"sd-widget-bottom",children:[!I&&Object(d.jsxs)("div",{className:"sd-widget-swap-top wrapper-paddings",children:[Object(d.jsxs)("div",{className:"sd-widget-smart-lend-title",children:[Object(d.jsx)("div",{children:"Lend"}),Object(d.jsx)("div",{children:Object(d.jsx)(we,{title:he,placement:"right",className:"sd-widget-html-tooltip",children:Object(d.jsx)(be.a,{style:{fontSize:16}})})})]}),Object(d.jsxs)("div",{className:"sd-widget-smart-loan-balance",onClick:function(){w(U)},children:["Available: ",a&&a[1]&&U?m.sliceNumberToDecimals(U,4):0," ",a&&a[1]?a[1].symbol:""]})]}),I&&Object(d.jsx)("div",{className:"sd-widget-loan-top",children:Object(d.jsxs)("div",{className:"sd-widget-loan-expiration",children:[Object(d.jsx)("div",{children:z}),Object(d.jsx)("div",{className:"sd-widget-loan-expiration-tag",children:"LOAN EXPIRATION"}),Object(d.jsx)("div",{})]})}),!I&&a&&Object(d.jsx)(p,{token:a[1],balance:U,changeValue:function(e){var t=f.formatNumberInput(e,U,U);!1!==t&&w(t)},value:v}),!I&&a&&Object(d.jsxs)("div",{className:"sd-widget-lend-info wrapper-paddings",children:[Object(d.jsxs)("div",{className:"sd-widget-lend-backing ",children:[Object(d.jsx)("div",{children:"Backing per token"}),Object(d.jsxs)("div",{children:[q&&function(){var e=q.split(".");return m.sliceNumberToDecimals(q,parseInt(m.getZeroes(e[1]))+3)}()," ",a[2].symbol]})]}),Object(d.jsxs)("div",{className:"sd-widget-lend-backing ",children:[Object(d.jsx)("div",{children:"Estimated loan"}),Object(d.jsxs)("div",{children:[q&&function(){if(parseFloat(v)>0){var e=m.castNumberToString(je(v).times(q)),t=e.split(".");return t[1]?m.sliceNumberToDecimals(e,parseInt(m.getZeroes(t[1]))+3):e}return 0}()," ",a[2].symbol]})]})]}),I&&a&&Object(d.jsxs)("div",{className:"sd-widget-loan-details",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"Repay Amount"}),Object(d.jsxs)("div",{children:[A?function(){var e=m.castNumberToString(A).split(".");return m.sliceNumberToDecimals(A,parseInt(m.getZeroes(e[1]))+3)}():0," ",a[2].symbol.substring(0)]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"Collateral"}),Object(d.jsxs)("div",{children:[F," ",a[1].symbol]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"Extension Fee"}),Object(d.jsxs)("div",{children:[F?function(){var e=m.castNumberToString(je(F).times(.001)),t=e.split(".");return t[1]?m.sliceNumberToDecimals(e,parseInt(m.getZeroes(t[1]))+3):e}():0," ",a[1].symbol]})]})]}),n&&Object(d.jsx)(de,{}),!n&&!I&&Object(d.jsx)(oe,{theme:t,allowance:y,connectWallet:function(){i.connectWallet()},wallet:c,makeLoan:ye,disabled:!!y&&!v,loanLoader:le,allowanceLoader:ve}),!n&&I&&Object(d.jsx)(ue,{theme:t,extendLoan:ke,repayLoan:Te,extendLoader:re,repayLoader:Q})]})}var we=Object(pe.a)((function(e){var t=e.className,n=Object(te.a)(e,me);return Object(d.jsx)(f.a,Object(ee.a)(Object(ee.a)({},n),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(Q.a)({},"& .".concat(fe.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"})}));function Oe(e){var t=e.tx1,n=e.backing,r=e.rpf;return Object(d.jsxs)("div",{className:"sd-widget-token-tax",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"Backing"}),Object(d.jsx)("div",{children:Object(d.jsx)(f.a,{title:"Asset Backing",arrow:!0,children:Object(d.jsx)(be.a,{style:{fontSize:16}})})})]}),Object(d.jsxs)("div",{children:[n,"%"]})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"RPF"}),Object(d.jsx)("div",{children:Object(d.jsx)(f.a,{title:"Rising Price Floor",arrow:!0,children:Object(d.jsx)(be.a,{style:{fontSize:16}})})})]}),Object(d.jsxs)("div",{children:[r,"%"]})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:"Reflections"}),Object(d.jsx)("div",{children:Object(d.jsx)(f.a,{title:"Holder Reward Tax",arrow:!0,children:Object(d.jsx)(be.a,{style:{fontSize:16}})})})]}),Object(d.jsxs)("div",{children:[t,"%"]})]})]})}var xe=n(404),ye=n.n(xe);function ge(e){var t=e.token,n=e.backing,r=e.reflections,a=e.rpf,c=e.hideTokenomics;return Object(d.jsxs)("div",{className:"sd-widget-bottom",children:[Object(d.jsx)("div",{className:"sd-widget-loan-top",children:Object(d.jsxs)("div",{className:"sd-widget-loan-expiration",children:[Object(d.jsx)("div",{children:t.symbol}),Object(d.jsx)("div",{className:"sd-widget-loan-expiration-tag",children:"TOKENOMICS"}),Object(d.jsx)("div",{})]})}),Object(d.jsxs)("div",{className:"sd-widget-token-tax-info",children:[Object(d.jsx)(Oe,{backing:n,rpf:a,tx1:r}),Object(d.jsxs)("div",{onClick:c,className:"sd-widget-tokenomics-back-button",children:[Object(d.jsx)("div",{children:Object(d.jsx)(ye.a,{style:{fontSize:16}})}),Object(d.jsx)("div",{children:"BACK"})]})]})]})}var ke=document.getElementById("sd-widget");var Te=function(){var e=T(),t=X(),n=k(),a=ke.dataset.token,c=ke.dataset.chain,i=!(!ke.dataset.elevation||"true"!==ke.dataset.elevation),u="dark"===ke.dataset.theme||"light"===ke.dataset.theme?ke.dataset.theme:"dark",f="1"===c?"ETH":"BNB",m=L(c),j=Object(r.useState)(!1),h=Object(o.a)(j,2),v=h[0],w=h[1],x=Object(r.useState)(!0),y=Object(o.a)(x,2),g=y[0],N=y[1],S=Object(r.useState)("buy"),I=Object(o.a)(S,2),C=I[0],M=I[1],B=Object(r.useState)(null),A=Object(o.a)(B,2),P=A[0],D=A[1],F=Object(r.useState)(null),E=Object(o.a)(F,2),W=E[0],R=E[1],z=Object(r.useState)(null),V=Object(o.a)(z,2),_=V[0],H=V[1],U=Object(r.useState)(null),G=Object(o.a)(U,2),Y=G[0],q=G[1],Q=Object(r.useState)(""),ee=Object(o.a)(Q,2),te=ee[0],ne=ee[1],re=Object(r.useState)(""),ae=Object(o.a)(re,2),ce=ae[0],ie=ae[1],se=Object(r.useState)(0),oe=Object(o.a)(se,2),ue=oe[0],le=oe[1],de=Object(r.useState)(0),pe=Object(o.a)(de,2),fe=pe[0],me=pe[1],je=Object(r.useState)(0),he=Object(o.a)(je,2),we=he[0],Oe=he[1],xe=Object(r.useState)(""),ye=Object(o.a)(xe,2),Te=ye[0],Ne=ye[1],Se=Object(r.useState)(""),Ie=Object(o.a)(Se,2),Ce=Ie[0],Me=Ie[1],Be=Object(r.useState)(!1),Ae=Object(o.a)(Be,2),Pe=Ae[0],Le=Ae[1],De=Object(r.useState)(""),Fe=Object(o.a)(De,2),Ee=Fe[0],We=Fe[1],Re=Object(r.useState)(""),ze=Object(o.a)(Re,2),Ve=ze[0],_e=ze[1],He=Object(r.useState)(""),Ue=Object(o.a)(He,2),Xe=Ue[0],Ze=Ue[1],Ge=Object(r.useState)(""),Ye=Object(o.a)(Ge,2),qe=Ye[0],Je=Ye[1],Ke=Object(r.useState)("trade"),$e=Object(o.a)(Ke,2),Qe=$e[0],et=$e[1],tt=Object(r.useState)(!1),nt=Object(o.a)(tt,2),rt=nt[0],at=nt[1],ct=Object(r.useState)(0),it=Object(o.a)(ct,2),st=it[0],ot=it[1],ut=Object(r.useState)(0),lt=Object(o.a)(ut,2),dt=lt[0],pt=lt[1],ft=Object(r.useState)(0),bt=Object(o.a)(ft,2),mt=bt[0],jt=bt[1],ht=Object(r.useState)(0),vt=Object(o.a)(ht,2),wt=vt[0],Ot=vt[1],xt=Object(r.useState)(!1),yt=Object(o.a)(xt,2),gt=yt[0],kt=yt[1],Tt=function(){return parseInt(c)===parseInt(m.getChain())};Object(r.useEffect)((function(){if(window.provider){var e=m.getWallet();e?Oe(e):(et("trade"),Oe(null)),Tt()&&(W||Mt())}else et("trade"),Oe(null)}),[m.getWallet(),window.provider,Tt()]),Object(r.useEffect)((function(){var e=setInterval((function(){"trade"===Qe&&W&&Tt()&&at(!rt)}),7500);return W&&Tt()||clearInterval(e),function(){clearInterval(e)}}),[_&&Y&&Tt()&&rt,Qe]),Object(r.useEffect)((function(){W&&Tt()&&we&&It(!0)}),[rt]),Object(r.useEffect)((function(){_&&Y&&C&&we&&It()}),[_&&Y&&C,_&&Y&&(we||Tt())]),Object(r.useEffect)((function(){_&&Y&&we&&P&&N(!1)}),[_&&Y&&we&&P]),Object(r.useEffect)((function(){if("input"===qe){if(te){var e=setTimeout((function(){return Bt()}),500);return Nt(),function(){return clearTimeout(e)}}ie(""),Nt()}else Nt()}),[te]),Object(r.useEffect)((function(){if("output"===qe){if(ce){var e=setTimeout((function(){return At()}),500);return Et(),Nt(),function(){return clearTimeout(e)}}ne(""),Et(),Nt()}else Et(),Nt()}),[ce]),Object(r.useEffect)((function(){v&&(Me(parseFloat(mt)+parseFloat(wt)+parseFloat(st)+parseFloat(dt)+1),P||St())}),[v]);var Nt=function(){me(te&&"buy"===C?te*P:ce&&"sell"===C?ce*P:""),parseFloat(te)>parseFloat(Te)&&(Je("input"),ne(Te))},St=function(){fetch("https://ticker.fegswap.com/api/cache?data=tick_spot").then((function(e){return e.json()})).then((function(e){var t=e.filter((function(e){return e.symbol===W[2].symbol+"USDT"}));D(t[0].price)}))},It=function(){var e=Object(s.a)(l.a.mark((function e(){var n,r,a,c,i,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]&&s[0],Lt(),Dt(),Ft(),Ct(),v){e.next=22;break}return e.next=8,t.getRpf(W[1]);case 8:return r=e.sent,ot(r),e.next=12,t.getTx1(W[1]);case 12:return a=e.sent,jt(a),e.next=16,t.getTx2(W[1]);case 16:return c=e.sent,Ot(c),e.next=20,t.getBacking(W[1]);case 20:i=e.sent,pt(i);case 22:n&&Bt(),w(!0);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getApproval(_,Y,we);case 2:n=e.sent,Le(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mt=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenData(a,c);case 2:(n=e.sent)[1]&&n[2]&&(R(n),q(n[1]),H(n[2]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEstimateOut(_,Y,te);case 2:n=e.sent,ie(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),At=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEstimateIn(_,Y,ce);case 2:n=e.sent,ne(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pt=function(){ne(""),ie("")},Lt=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBalanceByToken(_,we);case 2:n=e.sent,Ne(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSpotPrice(Y,_);case 2:n=e.sent,We(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,"buy"!==C){e.next=7;break}return e.next=4,t.getMaxBuy(_,Y);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,t.getMaxSell(_,Y);case 9:n=e.sent;case 10:_e({in:n.in,out:n.out}),Ze({pool1:n.pool1,pool2:n.pool2});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Et=function(){le(ce?"sell"===C?(ce/Xe.pool1*100).toFixed(2):(ce/Xe.pool2*100).toFixed(2):"")},Wt=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe){e.next=6;break}return e.next=3,t.setAllowance(_,Y,we,It,kt);case 3:return n=e.sent,Le(n),e.abrupt("return",!1);case 6:if("buy"!==C){e.next=13;break}return e.next=9,t.buy(_,Y,te,ce,Ce,we,It,kt);case 9:e.sent&&Pt(),e.next=18;break;case 13:if("sell"!==C){e.next=18;break}return e.next=16,t.sell(_,Y,te,ce,Ce,we,It,kt);case 16:e.sent&&Pt();case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"sd-widget-wrapper ".concat(i?"sd-widget-elevated":""," ").concat("dark"===u?"sd-dark":"sd-light"),children:[Object(d.jsxs)("div",{className:"sd-widget-main",children:[Object(d.jsxs)("div",{className:"sd-widget-toolbar",children:[Object(d.jsx)("div",{children:Object(d.jsx)(b,{disconnectWallet:m.disconnectWallet,address:we})}),Object(d.jsx)("div",{className:"sd-widget-toolbar-nav",children:Object(d.jsx)(Z,{loadingData:g,tradeView:Qe,setTradeView:et,chain:"1"===c?"eth":"56"===c?"bsc":void 0,tokenAddress:a,wallet:m.getWallet()})})]}),"trade"===Qe&&Object(d.jsxs)("div",{className:"sd-widget-bottom",children:[Object(d.jsxs)("div",{className:"sd-widget-swap",children:[Object(d.jsxs)("div",{className:"sd-widget-swap-top wrapper-paddings",children:[Object(d.jsxs)("div",{className:"sd-widget-spot-price-icon",onClick:function(){m.getWallet()&&et("tokenomics")},children:[Object(d.jsx)("div",{children:"Swap"}),Object(d.jsxs)("div",{children:[" ",Object(d.jsx)(be.a,{style:{fontSize:16}})]})]}),Object(d.jsxs)("div",{onClick:function(){Je("input");var e=Ve.in;parseFloat(e)>parseFloat(Te)&&(e=Te),ne(e)},className:"sd-widget-available-balance",children:["Available: ",n.sliceNumberToDecimals(Te,4)," ",_?_.symbol:""]})]}),Object(d.jsxs)("div",{className:"sd-widget-input-group",children:[Object(d.jsx)(p,{amountInValue:fe,loadingData:g,token:_,balance:Te,changeValue:function(t){var n=e.formatNumberInput(t,Ve.in,Te);Je("input"),!1!==n&&ne(n)},value:te}),Object(d.jsx)(O,{switchTheme:u,loadingData:g,switchAction:function(){M("buy"===C?"sell":"buy"),H(Y),q(_),Pt()}}),Object(d.jsx)(p,{slippage:Ce,tokenOutAmount:ce,loadingData:g,priceImpact:ue,token:Y,changeValue:function(t){var n=e.formatNumberInput(t,Ve.out);Je("output"),!1!==n&&(n=n.replace(/\s+/g,""),ie(n))},value:ce})]})]}),Object(d.jsx)(K,{tokens:W,spotPrice:Ee,token1:_,token2:Y}),Object(d.jsx)(J,{theme:u,loading:gt,amountIn:te,makeTx:Wt,nativeCurrency:f,title:parseInt(c)!==parseInt(m.getChain())?"Incorrect network":Pe?te===Te&&"buy"===C?"Leave enough ".concat(f," for gas"):"sell"===C?"Sell":"Buy":"Approve",wallet:we,connectWallet:function(){m.connectWallet()}})]}),"lend"===Qe&&Object(d.jsx)(ve,{theme:u,networkIssue:!Tt(),tokens:W,wallet:we,walletController:m}),"tokenomics"===Qe&&Object(d.jsx)(ge,{token:W[1],rpf:st,reflections:mt,backing:dt,hideTokenomics:function(){et("trade")}})]}),Object(d.jsx)($,{})]})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(Te,{})}),document.getElementById("sd-widget"))}},[[859,1,2]]]);